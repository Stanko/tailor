{
  "version": 3,
  "sources": ["../../src/index.ts", "../src/docs.ts"],
  "sourcesContent": ["type Child = string | HTMLElement | SVGElement;\n\nfunction div(attributes: Record<string, any> = {}, children: Child | Child[] = []): HTMLDivElement {\n  // Create element\n  const $div = document.createElement(\"div\");\n\n  // If children is a single element, wrap it into array\n  if (!Array.isArray(children)) {\n    children = [children];\n  }\n\n  // Loop through and append children\n  children.forEach((child) => {\n    if (typeof child === \"string\") {\n      $div.append(child);\n    } else {\n      $div.appendChild(child);\n    }\n  });\n\n  // Sett HTML attributes\n  for (let name in attributes) {\n    $div.setAttribute(name, attributes[name]);\n  }\n\n  return $div;\n}\n\n// function getBox($el: HTMLElement) {\n//   let top = 0;\n//   let left = 0;\n//   let $element: HTMLElement | null = $el;\n//   const width = $el.clientWidth;\n//   const height = $el.clientHeight;\n\n//   // Loop through the DOM tree\n//   // and add it's parent's offset to get page offset\n//   do {\n//     top += $element.offsetTop || 0;\n//     left += $element.offsetLeft || 0;\n//     $element = $element.offsetParent;\n//   } while ($element);\n\n//   top += window.scrollY;\n//   left += window.scrollX;\n\n//   return {\n//     x: left,\n//     left,\n//     y: top,\n//     top,\n//     width,\n//     height,\n//   };\n// }\n\nfunction setPosition($el: HTMLElement, left: number, top: number, width: number, height: number) {\n  $el.style.left = `${left}px`;\n  $el.style.top = `${top}px`;\n  $el.style.width = `${width}px`;\n  $el.style.height = `${height}px`;\n}\n\nclass Tailor {\n  $tailor: HTMLDivElement;\n  $padding: HTMLDivElement;\n  $margin: HTMLDivElement;\n  $rulerX: HTMLDivElement;\n  $rulerY: HTMLDivElement;\n  $rulerHelperX: HTMLDivElement;\n  $rulerHelperY: HTMLDivElement;\n\n  $highlighted: HTMLElement | null = null;\n  $to: HTMLElement | null = null;\n\n  selected: boolean = false;\n\n  constructor() {\n    this.$margin = div({ class: \"__tailor-margin\" });\n    this.$padding = div({ class: \"__tailor-padding\" });\n\n    this.$rulerX = div({ class: \"__tailor-measure __tailor-measure--x\" });\n    this.$rulerY = div({ class: \"__tailor-measure __tailor-measure--y\" });\n    this.$rulerHelperX = div({ class: \"__tailor-measure-helper __tailor-measure-helper--x\" });\n    this.$rulerHelperY = div({ class: \"__tailor-measure-helper __tailor-measure-helper--y\" });\n\n    this.$tailor = div({ class: \"__tailor\" });\n\n    this.$tailor.append(\n      this.$padding,\n      this.$margin,\n      this.$rulerX,\n      this.$rulerY,\n      this.$rulerHelperX,\n      this.$rulerHelperY\n    );\n\n    document.body.append(this.$tailor);\n\n    window.addEventListener(\"mousemove\", this.handleMouseMove);\n    window.addEventListener(\"click\", this.handleClick);\n    window.addEventListener(\"scroll\", this.handleScrollAndResize);\n    window.addEventListener(\"resize\", this.handleScrollAndResize);\n  }\n\n  destroy() {\n    this.$tailor.remove();\n\n    window.removeEventListener(\"mousemove\", this.handleMouseMove);\n    window.removeEventListener(\"click\", this.handleClick);\n    window.removeEventListener(\"scroll\", this.handleScrollAndResize);\n    window.removeEventListener(\"resize\", this.handleScrollAndResize);\n  }\n\n  disable() {\n    this.resetRulers();\n\n    this.$tailor.style.display = \"none\";\n    this.$highlighted = null;\n    this.selected = false;\n\n    // this.$tailor.classList.remove(\"__tailor--selected\");\n\n    if (this.$to) {\n      this.$to.classList.remove(\"__tailor-to\");\n      this.$to = null;\n    }\n  }\n\n  resetRulers() {\n    const { $rulerX, $rulerY, $rulerHelperX, $rulerHelperY } = this;\n\n    setPosition($rulerX, 0, 0, 0, 0);\n    setPosition($rulerY, 0, 0, 0, 0);\n    setPosition($rulerHelperX, 0, 0, 0, 0);\n    setPosition($rulerHelperY, 0, 0, 0, 0);\n\n    $rulerX.innerHTML = \"\";\n    $rulerY.innerHTML = \"\";\n  }\n\n  // ----- EVENT HANDLERS ----- //\n\n  handleMouseMove = (e: MouseEvent) => {\n    if (!e.metaKey) {\n      this.disable();\n      return;\n    }\n\n    this.$tailor.style.display = \"block\";\n\n    // TODO verify using EventTarget instead of casting to HTMLElement\n    const $target = e.target as HTMLElement;\n\n    if (this.selected) {\n      if (this.$to !== $target && this.$highlighted && this.$highlighted !== $target) {\n        this.measureDistance(this.$highlighted, $target);\n      }\n    } else if (this.$highlighted !== e.target) {\n      this.$highlighted = $target;\n\n      this.highlightElement(this.$highlighted);\n    }\n  };\n\n  handleClick = (e: MouseEvent) => {\n    e.preventDefault();\n    this.selected = true;\n    this.$highlighted = e.target as HTMLElement;\n    this.highlightElement(this.$highlighted);\n  };\n\n  handleScrollAndResize = () => {\n    if (this.$highlighted) {\n      this.highlightElement(this.$highlighted);\n    }\n  };\n\n  // ----- MAIN ----- //\n\n  highlightElement($el: HTMLElement) {\n    const style = getComputedStyle($el);\n    const box = $el.getBoundingClientRect();\n    // const box = getBox($el);\n\n    const { $tailor, $margin, $padding } = this;\n\n    const margin = {\n      top: parseFloat(style.marginTop),\n      bottom: parseFloat(style.marginBottom),\n      left: parseFloat(style.marginLeft),\n      right: parseFloat(style.marginRight),\n      inline: parseFloat(style.marginLeft) + parseFloat(style.marginRight),\n      block: parseFloat(style.marginTop) + parseFloat(style.marginBottom),\n    };\n    const padding = {\n      top: parseFloat(style.paddingTop),\n      bottom: parseFloat(style.paddingBottom),\n      left: parseFloat(style.paddingLeft),\n      right: parseFloat(style.paddingRight),\n      inline: parseFloat(style.paddingLeft) + parseFloat(style.paddingRight),\n      block: parseFloat(style.paddingTop) + parseFloat(style.paddingBottom),\n    };\n\n    setPosition($tailor, box.x, box.y, box.width, box.height);\n\n    $tailor.style.paddingLeft = style.paddingLeft;\n    $tailor.style.paddingRight = style.paddingRight;\n    $tailor.style.paddingTop = style.paddingTop;\n    $tailor.style.paddingBottom = style.paddingBottom;\n\n    setPosition(\n      $margin,\n      box.x - margin.left,\n      box.y - margin.top,\n      box.width + margin.inline,\n      box.height + margin.block\n    );\n    $margin.style.borderWidth = `${margin.top}px ${margin.right}px ${margin.bottom}px ${margin.left}px`;\n\n    let marginHTML = \"\";\n    let paddingHTML = \"\";\n    const sides = [\"top\", \"right\", \"bottom\", \"left\"] as const;\n\n    sides.forEach((side) => {\n      if (margin[side]) {\n        marginHTML += `<div class=\"__tailor-margin-label __tailor-margin-label--${side}\">\n          ${+margin[side].toFixed(1)}\n        </div>`;\n      }\n      if (padding[side]) {\n        paddingHTML += `<div class=\"__tailor-padding-label __tailor-padding-label--${side}\">\n          ${+padding[side].toFixed(1)}\n        </div>`;\n      }\n    });\n\n    $margin.innerHTML = marginHTML;\n    $padding.innerHTML = paddingHTML;\n  }\n\n  measureDistance($from: HTMLElement, $to: HTMLElement) {\n    const from = $from.getBoundingClientRect();\n    const to = $to.getBoundingClientRect();\n    const { $rulerX, $rulerY, $rulerHelperX, $rulerHelperY } = this;\n\n    if (this.$to) {\n      this.$to.classList.remove(\"__tailor-to\");\n    }\n\n    this.$to = $to;\n    $to.classList.add(\"__tailor-to\");\n\n    const isAbove = from.bottom <= to.top;\n    const isBelow = from.top >= to.bottom;\n    const isLeft = from.right <= to.left;\n    const isRight = from.left >= to.right;\n\n    this.resetRulers();\n\n    $rulerX.innerHTML = \"\";\n    $rulerY.innerHTML = \"\";\n\n    const xMid = from.left + from.width * 0.5;\n    const yMid = from.top + from.height * 0.5;\n\n    if (isAbove) {\n      setPosition($rulerY, xMid, from.bottom, 0, to.top - from.bottom);\n      $rulerY.innerHTML = `<div>${+(to.top - from.bottom).toFixed(1)}</div>`;\n\n      if (xMid < to.left) {\n        setPosition($rulerHelperX, xMid, to.top, to.left - xMid, 0);\n      } else if (xMid > to.right) {\n        setPosition($rulerHelperX, to.right, to.top, xMid - to.right, 0);\n      }\n    } else if (isBelow) {\n      setPosition($rulerY, xMid, to.bottom, 0, from.top - to.bottom);\n      $rulerY.innerHTML = `<div>${+(from.top - to.bottom).toFixed(1)}</div>`;\n\n      if (xMid < to.left) {\n        setPosition($rulerHelperX, xMid, to.bottom - 1, to.left - xMid, 0);\n      } else if (xMid > to.right) {\n        setPosition($rulerHelperX, to.right, to.bottom - 1, xMid - to.right, 0);\n      }\n    }\n\n    if (isLeft) {\n      setPosition($rulerX, from.right, yMid, to.left - from.right, 0);\n      $rulerX.innerHTML = `<div>${+(to.left - from.right).toFixed(1)}</div>`;\n\n      if (yMid < to.top) {\n        setPosition($rulerHelperY, to.left, yMid, 0, to.top - yMid);\n      } else if (yMid > to.bottom) {\n        setPosition($rulerHelperY, to.left, to.bottom, 0, yMid - to.bottom);\n      }\n    } else if (isRight) {\n      setPosition($rulerX, to.right, yMid, from.left - to.right, 0);\n      $rulerX.innerHTML = `<div>${+(from.left - to.right).toFixed(1)}</div>`;\n\n      if (yMid < to.top) {\n        setPosition($rulerHelperY, to.right - 1, yMid, 0, to.top - yMid);\n      } else if (yMid > to.bottom) {\n        setPosition($rulerHelperY, to.right - 1, to.bottom, 0, yMid - to.bottom);\n      }\n    }\n  }\n}\n\nexport default Tailor;\n", "import Tailor from \"../../src/index\";\n\nnew Tailor();\n"],
  "mappings": "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",
  "names": ["div", "attributes", "children", "$div", "child", "name", "setPosition", "$el", "left", "top", "width", "height", "Tailor", "e", "$target", "$rulerX", "$rulerY", "$rulerHelperX", "$rulerHelperY", "style", "box", "$tailor", "$margin", "$padding", "margin", "padding", "marginHTML", "paddingHTML", "side", "$from", "$to", "from", "to", "isAbove", "isBelow", "isLeft", "isRight", "xMid", "yMid", "src_default", "src_default"]
}
